<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Height Detector - SMK KAL 1 Surabaya</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
/* ===================== GLOBAL STYLE ===================== */
body {
  margin:0;
  padding:0;
  font-family: 'Orbitron', sans-serif;
  background: linear-gradient(135deg, #071526, #0a1e35, #001733);
  color:#e5f3ff;
  min-height:100vh;
  overflow-x:hidden;
}

/* Glow animation */
@keyframes glow {
  0% { box-shadow:0 0 8px #3b82f6; }
  50% { box-shadow:0 0 22px #60a5fa; }
  100% { box-shadow:0 0 8px #3b82f6; }
}

/* Smooth fade */
@keyframes fadeIn {
  from { opacity:0; transform:translateY(20px); }
  to { opacity:1; transform:translateY(0); }
}

/* Scanner bar animation */
@keyframes scan {
  0% { transform:translateX(-100%); }
  100% { transform:translateX(100%); }
}

/* ===================== LAYOUT ===================== */
.container {
  max-width:900px;
  margin:0 auto;
  padding:20px;
  animation: fadeIn 1.2s ease;
}

header {
  text-align:center;
  margin-bottom:20px;
}

header h1 {
  font-size:2.2rem;
  color:#38bdf8;
  text-shadow:0 0 14px #38bdf8;
  letter-spacing:2px;
  font-weight:900;
}

.school {
  margin-top:8px;
  font-size:1rem;
  opacity:0.85;
  color:#93c5fd;
}

.sensor-status {
  margin-top:15px;
  display:inline-flex;
  gap:10px;
  align-items:center;
  background:rgba(59,130,246,0.2);
  padding:8px 18px;
  border-radius:20px;
  backdrop-filter:blur(7px);
  border:1px solid rgba(255,255,255,0.1);
}

/* CARD */
.card {
  background:rgba(15,23,42,0.65);
  padding:30px;
  border-radius:25px;
  border:1px solid rgba(59,130,246,0.4);
  box-shadow:0 0 20px rgba(0,0,0,0.4);
  backdrop-filter:blur(10px);
  animation: glow 3.5s infinite;
}

.card-title {
  display:flex;
  gap:10px;
  align-items:center;
  color:#60a5fa;
  font-weight:800;
  font-size:1.5rem;
}

/* HEIGHT DISPLAY */
.height-display {
  position:relative;
  text-align:center;
  margin-top:25px;
}

.height-value {
  font-size:6rem;
  font-weight:900;
  background: linear-gradient(90deg, #3b82f6, #06b6d4);
  -webkit-background-clip:text;
  color:transparent;
  text-shadow:0 0 18px rgba(59,130,246,0.7);
}

.unit {
  font-size:2rem;
  opacity:0.8;
  margin-left:5px;
}

/* Scanner bar */
.scanner-line {
  width:100%;
  height:5px;
  background:linear-gradient(to right, transparent, #38bdf8, transparent);
  margin-top:15px;
  overflow:hidden;
  position:relative;
}

.scanner-line::before {
  content:"";
  position:absolute;
  top:0; left:0;
  width:100%;
  height:100%;
  transform:translateX(-100%);
  background:linear-gradient(to right, transparent, #93c5fd, transparent);
  animation: scan 2.3s linear infinite;
}

/* Progress */
.progress-container {
  margin-top:25px;
}

.progress-bar {
  height:16px;
  background:rgba(255,255,255,0.1);
  border-radius:10px;
  overflow:hidden;
}

.progress-fill {
  height:100%;
  width:0%;
  background:linear-gradient(90deg, #0ea5e9, #3b82f6);
  transition:width 1s ease;
}

/* Status Box */
.status-box {
  margin-top:20px;
  padding:15px;
  border-left:5px solid #3b82f6;
  background:rgba(3,105,161,0.22);
  border-radius:10px;
  font-size:1.1rem;
}

/* Button */
.btn {
  margin-top:25px;
  padding:15px 35px;
  font-size:1.2rem;
  color:white;
  background:linear-gradient(135deg, #1d4ed8, #3b82f6);
  border:none;
  border-radius:16px;
  cursor:pointer;
  transition:0.2s;
  width:100%;
}

.btn:hover {
  transform:scale(1.05);
  box-shadow:0 0 20px #60a5fa;
}

/* Footer */
footer {
  margin-top:30px;
  text-align:center;
  font-size:0.85rem;
  opacity:0.6;
}

/* MOBILE RESPONSIVE */
@media(max-width:500px){
  .height-value { font-size:4rem; }
  .btn { font-size:1rem; }
  header h1 { font-size:1.7rem; }
}
</style>
</head>

<body>

<div class="container">

<header>
  <h1>SMART HEIGHT DETECTOR</h1>
  <div class="school">SMK KAL 1 SURABAYA</div>
  <div class="sensor-status">
    <i class="fas fa-microchip"></i> Sensor Aktif - Mode AutoScan
  </div>
</header>

<div class="card">
  <div class="card-title"><i class="fas fa-robot"></i> Robotic Height Scanner</div>

  <div class="height-display">
    <span id="heightValue" class="height-value">0</span><span class="unit">cm</span>
    <div class="scanner-line"></div>
  </div>

  <div class="progress-container">
    <div class="progress-bar">
      <div id="progressFill" class="progress-fill"></div>
    </div>
  </div>

  <div id="statusBox" class="status-box">
    <i class="fas fa-spinner"></i> Menunggu pengukuran...
  </div>

  <button id="btnMeasure" class="btn">
    <i class="fas fa-radar"></i> Scan Sekarang
  </button>
</div>

<footer>&copy; 2025 Smart Height Detector - SMK KAL 1 Surabaya</footer>

</div>

<script>
const btn = document.getElementById("btnMeasure");
const heightValue = document.getElementById("heightValue");
const progressFill = document.getElementById("progressFill");
const statusBox = document.getElementById("statusBox");

btn.onclick = () => {
    fetch("/scan")
    .then(r => r.json())
    .then(data => {
        let h = Math.round(data.height);  // ⬅ tanpa koma

        heightValue.textContent = h;
        progressFill.style.width = Math.min(100, (h/200)*100) + "%";

        let status = "Pengukuran stabil";
        if (h < 100) status = "⚠ Tinggi di bawah normal";
        if (h > 190) status = "⚠ Tinggi di atas rata-rata";

        statusBox.innerHTML = `<i class="fas fa-check-circle"></i> ${status}`;

        // Google voice langsung dari HP
        let u = new SpeechSynthesisUtterance(`Tinggi badan ${h} sentimeter`);
        speechSynthesis.speak(u);
    });
};
</script>

</body>
</html>
