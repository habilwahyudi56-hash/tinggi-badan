<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Height Detector - SMK KAL 1 Surabaya</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
body{
    margin:0;
    padding:0;
    font-family:'Poppins', sans-serif;
    background:#031526;
    color:#e5f0ff;
}

/* HEADER */
.header {
    text-align:center;
    padding:30px 10px;
}
.header h1{
    font-size:2.4rem;
    color:#4da8ff;
    text-shadow:0 0 15px #1d8bff;
    letter-spacing:2px;
}
.header h2{
    margin-top:-10px;
    font-size:1.2rem;
    opacity:0.7;
}

/* CARD */
.card{
    width:90%;
    max-width:900px;
    margin:20px auto;
    padding:25px;
    background:rgba(12,20,35,0.65);
    border:1px solid #1f4eff;
    border-radius:25px;
    box-shadow:0 0 25px rgba(0,102,255,0.3);
}

/* TITLE */
.card-title{
    font-size:1.5rem;
    font-weight:600;
    color:#4da8ff;
    display:flex;
    align-items:center;
    gap:10px;
}

/* INPUT NAMA */
.input-section{
    margin-top:20px;
}
.input-section label{
    font-size:1rem;
    opacity:0.9;
}
.input-section input{
    width:100%;
    padding:12px;
    margin-top:8px;
    border-radius:10px;
    border:none;
    background:#0d2236;
    color:white;
    font-size:1rem;
    outline:none;
    border:1px solid #2f6cff;
}

/* ANGKA TINGGI */
.height-display{
    text-align:center;
    margin:25px 0;
}
.height-value{
    font-size:6rem;
    font-weight:800;
    color:#4da8ff;
    text-shadow:0 0 25px #1d8bff;
}

/* BAR */
.progress-bar{
    width:100%;
    height:12px;
    background:rgba(255,255,255,0.1);
    border-radius:8px;
    overflow:hidden;
}
.progress-fill{
    height:100%;
    width:0%;
    background:linear-gradient(90deg,#00c3ff,#007bff);
    transition:0.8s;
}

/* STATUS */
.status-box{
    margin-top:18px;
    padding:12px;
    background:rgba(50,125,255,0.2);
    border-left:4px solid #4da8ff;
    border-radius:8px;
    font-size:0.95rem;
}

/* BUTTON */
.btn{
    margin-top:25px;
    width:100%;
    padding:15px;
    background:linear-gradient(90deg,#1d8bff,#4da8ff);
    color:white;
    border:none;
    border-radius:15px;
    font-size:1.2rem;
    font-weight:600;
    cursor:pointer;
    transition:0.2s;
}
.btn:hover{
    transform:scale(1.03);
}

/* RESPONSIVE */
@media (max-width:500px){
    .height-value{
        font-size:4.5rem;
    }
}

</style>
</head>

<body>

<div class="header">
    <h1>SMART HEIGHT DETECTOR</h1>
    <h2>SMK KAL 1 SURABAYA</h2>
    <div style="margin-top:10px; font-size:0.9rem; opacity:0.8;">
        <i class="fas fa-microchip"></i> Sensor Aktif - Mode AutoScan
    </div>
</div>

<!-- CARD -->
<div class="card">

    <div class="card-title">
        <i class="fas fa-robot"></i> Robotic Height Scanner
    </div>

    <!-- INPUT NAMA -->
    <div class="input-section">
        <label>Masukkan Nama Siswa :</label>
        <input type="text" id="namaSiswa">
    </div>

    <!-- ANGKA -->
    <div class="height-display">
        <span class="height-value" id="height">0</span> cm
    </div>

    <!-- BAR -->
    <div class="progress-bar">
        <div class="progress-fill" id="progress"></div>
    </div>

    <!-- STATUS -->
    <div class="status-box" id="statusBox">
        ⏳ Menunggu pengukuran...
    </div>

    <!-- BUTTON -->
    <button class="btn" id="scanBtn"><i class="fas fa-ruler-vertical"></i> Scan Sekarang</button>

</div>

<!-- SCRIPT -->
<script>
const btn = document.getElementById("scanBtn");
const heightText = document.getElementById("height");
const progress = document.getElementById("progress");
const nama = document.getElementById("namaSiswa");
const statusBox = document.getElementById("statusBox");

btn.addEventListener("click", ()=>{

    fetch("/scan")
    .then(res => res.json())
    .then(data => {

        let h = Math.floor(data.height);  // TANPA KOMA
        heightText.textContent = h;

        progress.style.width = (h/220)*100 + "%";

        statusBox.textContent = "✔ Pengukuran selesai";

        // Suara Google Text-to-Speech
        let n = nama.value || "Siswa tidak bernama";

        let u = new SpeechSynthesisUtterance(
            `Siswa ${n}, memiliki tinggi badan ${h} centimeter`
        );
        speechSynthesis.speak(u);

    });
});
</script>

</body>
</html>
