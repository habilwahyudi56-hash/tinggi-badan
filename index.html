<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Height Detector - SMK KAL 1 Surabaya</title>

<style>
/* ==== GLOBAL ==== */
body {
  margin: 0;
  padding: 0;
  font-family: 'Poppins', sans-serif;
  background: radial-gradient(circle at top, #0a0f2f, #030611 70%);
  color: #dbeafe;
  overflow-x: hidden;
}

h1, h2, h3 { margin: 0; }

/* ==== BACKGROUND PARTICLES ==== */
#particles {
  position: fixed;
  width: 100%; height: 100%;
  top: 0; left: 0;
  pointer-events: none;
  z-index: 0;
}

/* ==== HEADER ==== */
header {
  text-align: center;
  padding: 25px 10px;
  margin-bottom: 10px;
  position: relative;
  z-index: 2;
}

.title {
  font-size: 2.4rem;
  font-weight: 700;
  color: #60a5fa;
  text-shadow: 0 0 12px #1d4ed8, 0 0 25px #1e40af;
  animation: glow 3s infinite alternate;
}

@keyframes glow {
  from { text-shadow: 0 0 8px #3b82f6; }
  to   { text-shadow: 0 0 20px #60a5fa; }
}

.school-name {
  margin-top: 5px;
  font-size: 1rem;
  opacity: 0.8;
  letter-spacing: 1px;
}

/* ==== CARD ==== */
.card {
  margin: 20px auto;
  width: 90%;
  max-width: 600px;
  background: rgba(30,58,138,0.25);
  border: 1px solid rgba(96,165,250,0.4);
  box-shadow: 0 0 20px rgba(30,64,175,0.4);
  border-radius: 22px;
  padding: 25px;
  backdrop-filter: blur(15px);
  position: relative;
  z-index: 2;
  animation: fadeInUp 1s;
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(30px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ==== INPUT NAMA ==== */
.input-group {
  margin-bottom: 20px;
}

label {
  font-size: 1rem;
  opacity: 0.85;
}

input[type="text"] {
  width: 100%;
  padding: 13px;
  margin-top: 6px;
  font-size: 1rem;
  border-radius: 12px;
  outline: none;
  border: 2px solid #1d4ed8;
  background: rgba(255,255,255,0.1);
  color: #dbeafe;
  transition: 0.3s;
}

input[type="text"]:focus {
  border-color: #60a5fa;
  box-shadow: 0 0 12px #3b82f6;
}

/* ==== HEIGHT DISPLAY ==== */
.height-value {
  font-size: 4.5rem;
  font-weight: 800;
  text-align: center;
  background: linear-gradient(90deg, #3b82f6, #60a5fa);
  -webkit-background-clip: text;
  color: transparent;
  text-shadow: 0 0 20px rgba(96,165,250,0.4);
}

.unit {
  font-size: 1.3rem;
  opacity: 0.7;
  text-align: center;
  margin-top: -15px;
}

/* ==== METER BAR ==== */
.progress {
  width: 100%;
  height: 15px;
  background: rgba(255,255,255,0.1);
  border-radius: 10px;
  overflow: hidden;
  margin-top: 15px;
}

.progress-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg,#2563eb,#9333ea);
  transition: width 0.8s ease;
}

/* ==== BUTTON ==== */
.btn {
  width: 100%;
  padding: 14px;
  font-size: 1.1rem;
  background: linear-gradient(90deg,#1d4ed8,#60a5fa);
  border: none;
  border-radius: 14px;
  color: white;
  margin-top: 20px;
  cursor: pointer;
  font-weight: 600;
  transition: 0.3s;
  text-transform: uppercase;
}

.btn:hover {
  transform: scale(1.05);
  box-shadow: 0 0 15px #3b82f6;
}

/* ==== STATUS ==== */
.status {
  margin-top: 18px;
  text-align: center;
  font-size: 1.1rem;
}
</style>
</head>

<body>

<canvas id="particles"></canvas>

<header>
  <div class="title">SMART HEIGHT DETECTOR</div>
  <div class="school-name">SMK KAL 1 SURABAYA</div>
</header>

<div class="card">

  <div class="input-group">
    <label>Nama Siswa:</label>
    <input type="text" id="namaSiswa" placeholder="Masukkan nama siswa...">
  </div>

  <div class="height-value" id="heightDisplay">0</div>
  <div class="unit">cm</div>

  <div class="progress">
    <div class="progress-fill" id="progressFill"></div>
  </div>

  <button class="btn" id="btnScan">SCAN TINGGI</button>

  <div class="status" id="statusInfo">Tunggu perintah scan...</div>
</div>

<script>
/* ==== PARTIKEL BACKGROUND (ANIMASI) ==== */
const canvas = document.getElementById("particles");
const ctx = canvas.getContext("2d");
let particles = [];

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.onresize = resize;

for (let i = 0; i < 60; i++) {
  particles.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    s: Math.random() * 2 + 1,
    d: Math.random() * 1
  });
}

function animateBG() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle = "rgba(59,130,246,0.6)";

  particles.forEach(p => {
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.s, 0, Math.PI * 2);
    ctx.fill();
    p.y += p.d;
    if (p.y > canvas.height) p.y = 0;
  });

  requestAnimationFrame(animateBG);
}
animateBG();

/* ==== FITUR SCAN (SIMULASI â€” ganti fetch saat dimasukkan ke ESP) ==== */
document.getElementById("btnScan").addEventListener("click", () => {

  let nama = document.getElementById("namaSiswa").value;
  if (nama.trim() === "") {
    alert("Nama siswa belum diisi!");
    return;
  }

  // Demo (nanti diganti fetch('/scan'))
  let tinggi = Math.random() * (180 - 120) + 120;

  document.getElementById("heightDisplay").textContent = tinggi.toFixed(1);
  document.getElementById("progressFill").style.width = (tinggi / 220 * 100) + "%";

  document.getElementById("statusInfo").textContent =
    `Siswa ${nama} memiliki tinggi ${tinggi.toFixed(1)} cm`;

  // === SUARA GOOGLE ===
  let speak = new SpeechSynthesisUtterance(
    `Siswa ${nama}, dengan tinggi ${tinggi.toFixed(1)} centimeter`
  );
  speechSynthesis.speak(speak);
});
</script>

</body>
</html>
